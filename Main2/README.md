# Project Enigma: AI-Powered Puzzle Generator

Project Enigma is a Flask-based web application that uses Google's Generative AI (Gemini) to create coding and technical puzzles across various domains (Frontend, Backend, Database, AI Engineering) and difficulty levels. It provides an API for generating puzzles, validating user answers, basic player progress tracking, and an AI-powered hint system.

## Features

* **AI Puzzle Generation:** Leverages Gemini Pro to generate diverse puzzles.
* **Domain & Difficulty:** Supports different technical domains and difficulty levels.
* **Structured Validation:** Aims for AI-generated structured criteria for robust answer validation, with fallback to text parsing.
* **AI Hint System:** Provides AI-generated hints to players after multiple incorrect attempts on a puzzle.
* **Player Progress Tracking:** Records attempts, solve status, and hints given for each puzzle per player.
* **RESTful API:** Endpoints for puzzle generation, answer validation, and player management.
* **Database Storage:** Uses Flask-SQLAlchemy (SQLite backend) for data persistence.
* **Frontend Tester:** Includes `tester.html` for direct API interaction.

## Project Structure

```
.
├── Main/
│   ├── app.py              # Main Flask application, API endpoints, DB models
│   ├── init_database.py    # Script to initialize the database tables
│   ├── test.py             # Python script for API endpoint testing
│   ├── tester.html         # HTML frontend for testing the API
│   ├── requirements.txt    # Python dependencies
│   ├── .env                # Environment variables (API keys - **DO NOT COMMIT**)
│   ├── enigma_progress.db  # SQLite database file (created after init)
│   └── README.md           # This file
├── .gitignore              # Git ignore file
```

## Setup and Installation

1.  **Clone Repository:**
    ```bash
    git clone <your-repository-url>
    cd <repository-directory>/Main
    ```

2.  **Create & Activate Virtual Environment:** (Recommended)
    ```bash
    python -m venv venv
    # Windows: .\venv\Scripts\activate
    # macOS/Linux: source venv/bin/activate
    ```

3.  **Install Dependencies:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **Configure Environment Variables:**
    * Create `.env` in `Main/` directory.
    * Add your Google Generative AI API key:
        ```dotenv
        GOOGLE_API_KEY=YOUR_API_KEY_HERE
        ```

5.  **Initialize Database:**
    Run once to create `enigma_progress.db` and tables:
    ```bash
    python init_database.py
    ```

## Running the Application

1.  **Start Flask Server:**
    ```bash
    python app.py
    ```
    (Usually on `http://127.0.0.1:5000`. Debug mode is ON by default).

2.  **Use API Tester:**
    Open `tester.html` in a browser to interact with the API. Hints will appear below the result after 3 incorrect attempts for the same puzzle by the same player.

## API Endpoints

* `GET /`: Status check.
* `POST /players`: Create a player.
    * Body: `{"username": "..."}`
* `GET /players/<player_id>`: Get player details and progress.
* `POST /generate_puzzle`: Generate a new puzzle.
    * Body: `{"domain": "...", "difficulty": "..."}`
* `POST /validate_answer`: Validate answer and potentially get a hint.
    * Body: `{"puzzle_id": ..., "player_id": ..., "user_answer": "..."}`
    * Response includes `correct`, `feedback`, and optionally `hint`.

## Hint System Details

* Hints are generated by the AI when a player makes **3 or more incorrect attempts** on a specific puzzle.
* A hint is generated only once per player-puzzle combination.
* The hint is designed to be subtle and guide the user without giving away the direct answer.
* The hint (if available/generated) is returned in the `/validate_answer` response and displayed in `tester.html`.

## Future Improvements

* More sophisticated AI-assisted validation for complex answers.
* Secure code execution sandbox for coding puzzles.
* Enhanced puzzle variety control.
* Comprehensive unit and integration tests (especially for AI interactions using mocking).
* Production deployment setup (Gunicorn/Nginx, debug mode OFF).
* User authentication.
* Full-fledged web interface.
